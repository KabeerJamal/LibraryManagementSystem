
<table class="everyone-reservation-table">
    <thead>
        <tr>
            <th>S/N</th>
            <th>Reservation Number</th>
            <th>Borrower Name</th>
            <th>Books Reserved</th>
            <th>Status</th>
            <th>Reserve Date</th>
            <th>Collect Date</th>
            <th>Returned At</th>
            <th>Due Date</th>
            <th>Collect date deadline</th>
            
        </tr>
    </thead>
    <tbody class="all-reservations-table-body">
        <% let i = 0 %>
        <% reservations.forEach(reservation=> { %>
            <% i = i + 1 %>
            <% if (reservation.status != 'completed' && reservation.status != 'overdue' && reservation.status != 'baddebt') { %>
            <tr>
                <td class="reservation-frontend-number"   data-number="reservation.reservation_id">
                    <%= i %>
                </td>
                <td class="reservation-number" data-number="<%= reservation.reservation_id %>">
                    <%= reservation.reservation_id %>
                </td>
                <td class="name" data-number="<%= reservation.user_id %>">
                    <%= reservation.borrower_name %>
                </td>
                <td class="title-copies" data-number="<%= reservation.book_id %>">
                    <!-- <% if (reservation.books.length == 1) { %>
                    <%= reservation.books[0].book_title %> <%= reservation.books[0].number_of_copies %>
                    <% } else {%>
                        <button class="show-books" data-number="<%= reservation.reservation_id %>">Show Books</button>
                        <% }%> -->
                    <button class="show-books" data-number="<%= reservation.reservation_id %>">Show Books</button>
                </td>
                <td class="status" data-number="<%= reservation.reservation_id %>">
                    <%= reservation.status %>
                </td>
                <td class = "reserve-date">
                    <%= reservation.reserve_date %>
                </td>
                <td class = "collect-date">
                    <%= reservation.collect_date %>
                    <% if (reservation.collect_date == null) { %>
                    <button class="collect" data-number="<%= reservation.reservation_id %>">Collect</button>
                    <% } %>                
                </td>
                <td class="returned-at" data-number="<%= reservation.reservation_id %>">
                    <%= reservation.returned_at %>
                </td>
                <td class="return-date" data-number="<%= reservation.reservation_id %>">
                    <%= reservation.return_date %>
                    <% if(reservation.returned_at == null && reservation.collect_date != null) { %>
                        <button class="return" data-number="<%= reservation.reservation_id %>">Returned?</button>
                    <% } %>

                </td>
                <td class="collect-date-deadline">
                    <%= reservation.collect_date_deadline %>
                <td>
            </tr>
                <% } else { %>
                    
                    <tr>
                        <td class="reservation-frontend-number"   data-number="reservation.reservation_id">
                            <%= i %>
                        </td>
                        <td class="reservation-number" data-number="<%= reservation.reservation_id %>">
                            <%= reservation.reservation_id %>
                        </td>
                       
                        <td class="name" data-number="<%= reservation.user_id %>">
                            <%= reservation.borrower_name %>
                        </td>
                        
                            <td class="title-copies" data-number="<%= reservation.book_id %>">
                                <!-- <% if (reservation.books.length == 1) { %>
                                <%= reservation.books.book_title %> <%= reservation.books.number_of_copies %>
                                <% } else {%>
                                    <button class="show-books" data-number="<%= reservation.reservation_id %>">Show Books</button>
                                    <% }%> -->
                                <button class="show-books" data-number="<%= reservation.reservation_id %>">Show Books</button>
                            </td>
                        
                        

                       
                        <td class="status" data-number="<%= reservation.reservation_id %>">
                            <%= reservation.status %>
                        </td>
                        <td class = "reserve-date">
                            <%= reservation.reserve_date %>
                        </td>
                        <td class = "collect-date">
                            <%= reservation.collect_date %>
                            <% if (reservation.collect_date == null) { %>
                            <button class="collect" data-number="<%= reservation.reservation_id %>">Collect</button>
                            <% } %>                
                        </td>
                        <td class="returned-at" data-number="<%= reservation.reservation_id %>">
                            <%= reservation.returned_at %>
                        </td>
                        <td class="return-date" data-number="<%= reservation.reservation_id %>">
                            <%= reservation.return_date %>
                            <%if(reservation.status == 'completed') { %>
                                <% if(reservation.returned_at == null) { %>
                                    <button class="return" data-number="<%= reservation.reservation_id %>">Returned?</button>
                                <% } %>
                            <% } else if (reservation.status == 'overdue' ) {%>
                                <% if(reservation.returned_at == null) { %>
                                    <button class="return" data-number="<%= reservation.reservation_id %>">Returned?</button>
                                    <button class="bad-debt" data-number="<%= reservation.reservation_id %>">Bad Debt</button>
                                <% } %>
                            <% } %>

                        </td>
                        <td class="collect-date-deadline">
                            <%= reservation.collect_date_deadline %>
                        <td>
                    </tr>
                        <% } %>
                    <% }) %>
    </tbody>
</table>